<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Video - JNV Quiz Admin</title>
    <%- include('partials/head') %>
</head>
<body>
    <%- include('partials/nav') %>

    <div class="container">
        <h1>Edit Video</h1>

        <% if (message) { %>
            <div class="success"><%= message %></div>
        <% } %>
        <% if (error) { %>
            <div class="error"><%= error %></div>
        <% } %>

        <div class="card">
            <!-- Video Preview -->
            <div style="margin-bottom: 30px;">
                <h3 style="margin-bottom: 15px;">Video Preview</h3>
                <video controls style="max-width: 600px; width: 100%; border: 1px solid #ddd; border-radius: 5px;">
                    <source src="<%= video.video_url %>" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
                <p style="color: #666; margin-top: 10px; font-size: 14px;">
                    <strong>Current URL:</strong> <%= video.video_url %>
                </p>
            </div>

            <!-- Edit Form -->
            <form method="POST" action="/admin/videos/<%= video.id %>/update">
                <div style="display: grid; grid-template-columns: 150px 1fr; gap: 20px;">
                    <div class="form-group">
                        <label for="level">Level *</label>
                        <input type="number" id="level" name="level" min="1" max="100" value="<%= video.level %>" required>
                    </div>

                    <div class="form-group">
                        <label for="video_name">Video Name *</label>
                        <input type="text" id="video_name" name="video_name" value="<%= video.video_name %>" required>
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: 200px 1fr 200px; gap: 20px;">
                    <div class="form-group">
                        <label for="duration_seconds">Duration (seconds) *</label>
                        <input type="number" id="duration_seconds" name="duration_seconds" min="1" value="<%= video.duration_seconds %>" required>
                    </div>

                    <div class="form-group">
                        <label for="description">Description</label>
                        <input type="text" id="description" name="description" value="<%= video.description || '' %>">
                    </div>

                    <div class="form-group">
                        <label for="category">Category *</label>
                        <select id="category" name="category" required>
                            <option value="promotional" <%= video.category === 'promotional' ? 'selected' : '' %>>Promotional</option>
                            <option value="shorts" <%= video.category === 'shorts' ? 'selected' : '' %>>Shorts</option>
                            <option value="lifeline" <%= video.category === 'lifeline' ? 'selected' : '' %>>Lifeline</option>
                            <option value="tutorial" <%= video.category === 'tutorial' ? 'selected' : '' %>>Tutorial</option>
                            <option value="other" <%= video.category === 'other' ? 'selected' : '' %>>Other</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label style="display: flex; align-items: center; cursor: pointer;">
                        <input type="checkbox" id="is_active" name="is_active" <%= video.is_active ? 'checked' : '' %> style="width: auto; margin-right: 10px;">
                        <span>Active (Video is available for users)</span>
                    </label>
                </div>

                <div style="display: flex; gap: 10px;">
                    <button type="submit">Update Video</button>
                    <a href="/admin/videos" class="btn" style="background: #6c757d; text-decoration: none; display: inline-block;">Cancel</a>
                </div>
            </form>
        </div>

        <div class="card" style="background: #f8f9fa; border-left: 4px solid #0066cc;">
            <h3 style="margin-bottom: 10px;">Note</h3>
            <p style="margin: 0; color: #666;">
                The video file cannot be changed after upload. If you need to replace the video,
                please delete this entry and upload a new video.
            </p>
        </div>
    </div>
</body>
</html>
